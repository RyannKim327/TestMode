const Fetch = require("node-fetch");

/**
 * ChatBot
 * @param {object}
 * @returns {Data}
 */

async function chat(options = {}) {
	if(!options.Message) throw new Error(`No Message There`);
	if(options.Message.length > 1900) throw new Error("Message should be less than 1900 words");

	const res = await Fetch(encodeURI(`https://api.affiliateplus.xyz/api/chatbot?message=${options.Message}`)), json = await res.json();

	if(!json.message) throw new Error(`An Error Occured`);

	let Data = {
		embed: {
			color: options.Color || "RANDOM",
			description: json.message,
			timestamp: new Date()
		}
	};

	if(options.ResultOnly && options.ResultOnly === true) return {
		Result: json.message
	};

	return Data;
};

module.exports = {
	chat
};